<!-- app/views/reports/sales.html.erb -->
<h1>Sales Report</h1>

<h1>Sales Trends</h1>
<%= line_chart @sales_orders.group_by_day(:order_date).sum(:total_price) %>

<%= form_with url: reports_sales_path, method: :get, local: true do |f| %>
  <div>
    <%= f.label :start_date, "Start Date" %>
    <%= f.date_field :start_date, value: params[:start_date] %>
  </div>
  <div>
    <%= f.label :end_date, "End Date" %>
    <%= f.date_field :end_date, value: params[:end_date] %>
  </div>
  <div>
    <%= f.label :customer_id, "Customer" %>
    <%= f.collection_select :customer_id, Customer.all, :id, :name, include_blank: true %>
  </div>
  <%= f.submit "Filter" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Order Date</th>
      <th>Customer</th>
      <th>Product</th>
      <th>Quantity</th>
      <th>Total Amount</th>
    </tr>
  </thead>
  <tbody>
    <% @sales_orders.each do |order| %>
      <tr>
        <td><%= order.order_date %></td>
        <td><%= order.customer.name %></td>
        <td><%= order.product.name %></td>
        <td><%= order.quantity %></td>
        <td><%= order.total_price %></td>
      </tr>
    <% end %>
  </tbody>
</table>
